创建索引速度调优：
1）使用bulk request
2）Use multiple workers/threads to send data to Elasticsearch

搜索速度调优：
1）Give memory to the filesystem cache
ES严重依赖filesystem cache为了使搜索更快。一般来说，你应当确保一般的可用内存分配给filesystem cache,确保ES可以保持
索引的热数据在物理内存中。
2）使用更快的硬件
如果你的搜索是I/O受限的，使用SSD
如果是CPU受限的，使用更快的cpu.
3)文档模型
尽量避免join操作。嵌套，父子关系等都会使得查询变慢。
4）


**introduction
可扩展性：集群，节点和分片
elasticSearch天然的支持分布式可以很方便的扩展。你可以向集群中增加更多的服务器（节点）来提高容量，ES会自动的
分布你的数据并且把查询负载在所有可用的节点上。不需要修改你的应用代码。

为什么可以支持扩展？
在底层，一个ES索引实际上只是一个或多个物理分片的逻辑分组，每个分片实际上是一个自包含的索引。
通过把一个索引中的文档分布在多个分片上，并且这些分片分布在多个节点上，ES可以确保有足够的冗余，可以抵御硬件
故障，并且可以提高查询容量。当集群扩张或收缩，ES会自动迁移分片来重平衡整个集群。

总共有两种类型的分片：主分片(primary)和副分片(replica).索引中的每个文档都属于自己的主分片。副分片是主分片的拷贝。
副分片对你的数据提供冗余备份来预防硬件故障，并且可以提高服务读请求的容量，比如搜索或查找文档。

在一个索引创建时，索引中的主分片的数量就确定了。但是副分片的数量随时都可以改变，不会影响indexing和查询操作。


对于分片的大小和索引的主分片数量有很多的性能考虑和权衡。分片数量越多，维护这些索引的开销就越多。单个分片的容量越大，
当ES需要重平衡集群时就需要花费更长的时间移动分片。
查询许多小分片使得每个小分片上的处理更快，但是更多的小分片意味着查询的次数更多，开销越大。
因此，在更少数量，更大分片上查询会更快。

可以有以下参考：
1）尽量保持平均分片大小在几GB到几十GB之间。
2）避免大量分片问题。一个节点可以支持的分片数量是正比于可用堆空间大小。一般规则是，每GB的堆空间分片数量要小于20个。

**跨集群复制（ＣＣＲ）
为了性能考虑，同一集群中的节点应当在相同的网络中。因为集群跨不同数据中心节点进行平衡分片太耗时。
但是高可用架构要求我们不要把鸡蛋放在一个篮子里。如果一个位置发生重大故障，则另一个位置的服务器需要能够接管。
无缝衔接，这就是ＣＣＲ，跨集群复制。
CCR提供了一种方式，自动从主集群同步索引到远程集群，远程集群可以作为热备份。如果主集群宕机，则远程集群可以取代。
您还可以使用CCR创建辅助群集，以接近地理位置的方式向用户提供读取请求。
跨集群复制是主备的。主集群上的索引处理所有的写请求。备份集群是只读的。
